import{r,o as c,c as _,b as e,w as v,v as y,e as d,u as z,t as u,K as p,l as b}from"./index.5086d4bd.js";const P=e("h1",null," Crea un piano di pulizia ",-1),V=e("br",null,null,-1),k={style:{float:"left","margin-right":"20px"}},w=e("label",null," Zona ",-1),S={style:{float:"left","margin-right":"20px"}},T=e("label",null," Durata del piano ",-1),C=e("br",null,null,-1),D={style:{color:"red"}},O={style:{color:"white"}},j={}.VITE_API_HOST||"http://localhost:8080",x=j,B={name:"Plan",props:{org_name:String},components:{Datepicker:p},data(){return{org_name:this.org_name,date:null}}},I=Object.assign(B,{setup(m){const n=r(""),s=r(""),i=r("");function g(a,t,o){s.value="",i.value="",h(a,t,o).catch(l=>console.log(l))}async function h(a,t,o){let l=await fetch(x+"/piano_pulizia",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":b.token},body:JSON.stringify({id_zona:n.value,data_inizio:t,data_fine:o,nome_organizzazione:a})});if(l.ok){let f=await l.json();console.log(f),i.value="Piano di pulizia creato con successo"}else l.status==404?s.value="Zona non trovata":s.value="Errore sconosciuto"}return(a,t)=>(c(),_("form",null,[P,V,e("div",k,[w,v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o),placeholder:"ID"},null,512),[[y,n.value]]),e("button",{type:"button",onClick:t[1]||(t[1]=o=>g(this.org_name,this.date[0],this.date[1]))},"Crea piano di pulizia")]),e("div",S,[T,d(z(p),{modelValue:a.date,"onUpdate:modelValue":t[2]||(t[2]=o=>a.date=o),range:""},null,8,["modelValue"])]),C,e("span",D,u(s.value),1),e("span",O,u(i.value),1)]))}}),E={__name:"CreatePlanView",setup(m){return(n,s)=>(c(),_("main",null,[d(I,{org_name:n.$route.params.org_name},null,8,["org_name"])]))}};export{E as default};
