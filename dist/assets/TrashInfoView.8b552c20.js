import{r as u,l as _,o as n,c as r,b as o,t as e,w as g,j as y,F as p,g as T,a as v,e as z}from"./index.5086d4bd.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";const $={name:"TrashInfo",props:{org_name:String,plan_id:Number,trash_id:Number,zone_id:Number},methods:{classifyTrash:w},data(){return{trash_info:k(this.plan_id,this.trash_id,this.zone_id),wantToClassify:l,categories:b,classification:d}}},I={}.VITE_API_HOST||"http://localhost:8080",m=I,l=u(!1),b=u(["Plastica","Vetro","Carta","Metallo","Organico","Indifferenziato","Non riconosciuto"]),d=u("");function k(c,t,h){console.log(t);let f=u({});return fetch(m+"/rifiuto/toclassify?"+new URLSearchParams({id_zona:h}),{method:"GET",headers:{"Content-Type":"application/json","x-access-token":_.token}}).then(i=>i.json()).then(function(i){Array.isArray(i)||(i=[i]),console.log(i);for(let s=0;s<i.length;s++)i[s]._id===t&&(f.value=i[s])}).catch(i=>console.error(i)),console.log(f),_.currentTrash=t,f}function w(c){if(console.log("Chiamata a classifica rifiuto: "+l.value),!l.value){l.value=!0;return}console.log("Classificazione rifiuto: "+d.value),fetch(m+"/rifiuto/"+c,{method:"PATCH",headers:{"Content-Type":"application/json","x-access-token":_.token},body:JSON.stringify({classificazione:d.value})}).catch(t=>console.error(t)),l.value=!1,this.$router.replace("/organisations/"+this.org_name+"/plans/"+this.plan_id+"/toclassify")}const N=o("h1",null,"Dettagli rifiuto non riconosciuto",-1),S={style:{float:"right","margin-top":"-155px"}},V=o("h1",null,"Foto rifiuto",-1),P=["src"],A=o("br",null,null,-1),U={key:0},x=o("h2",null,"Classifica rifiuto",-1),D=["value"],L=o("br",null,null,-1);function O(c,t,h,f,i,s){return n(),r(p,null,[o("form",null,[N,o("ul",null,[o("li",null,"ID: "+e(this.trash_info._id),1),o("li",null,"Zona: "+e(this.trash_info.id_zona),1),o("li",null,"Stato classificazione: "+e(this.trash_info.classificazione),1),o("li",null,"Posizione rilevata: "+e(this.trash_info.posizione),1),o("div",S,[V,o("img",{src:this.trash_info.URL_foto,width:"500",height:"400"},null,8,P)]),A,this.wantToClassify?(n(),r("div",U,[x,g(o("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>this.classification=a)},[(n(!0),r(p,null,T(this.categories,a=>(n(),r("option",{value:a},e(a),9,D))),256))],512),[[y,this.classification]])])):v("",!0)])]),L,o("button",{style:{float:"left","margin-left":"30px"},onClick:t[1]||(t[1]=a=>this.classifyTrash(this.trash_info._id))},"Classifica rifiuto")],64)}var B=C($,[["render",O]]);const H={__name:"TrashInfoView",setup(c){return(t,h)=>(n(),r("main",null,[z(B,{org_name:t.$route.params.org_name,plan_id:t.$route.params.plan_id,trash_id:t.$route.params.trash_id,zone_id:t.$route.query.id_zona},null,8,["org_name","plan_id","trash_id","zone_id"])]))}};export{H as default};
