import{r,o as c,c as d,b as e,w as v,v as y,d as _,i as z,u as b,K as p,t as u,l as k}from"./index.71390ce7.js";const P=e("h1",null," Crea un piano di pulizia ",-1),V=e("br",null,null,-1),w={style:{float:"left","margin-right":"20px"}},S=e("label",null," Zona ",-1),T={style:{float:"left","margin-right":"20px"}},x=e("label",null," Durata del piano ",-1),D=e("br",null,null,-1),O={style:{color:"red"}},j={style:{color:"white"}},B={}.VITE_API_HOST||"http://localhost:8080",C=B,I={name:"Plan",props:{org_name:String},components:{Datepicker:p},data(){return{org_name:this.org_name,date:null}}},U=Object.assign(I,{setup(m){const a=r(""),n=r(""),i=r("");function g(s,t,o){n.value="",i.value="",h(s,t,o).catch(l=>console.log(l))}async function h(s,t,o){let l=await fetch(C+"/piano_pulizia",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":k.token},body:JSON.stringify({id_zona:a.value,data_inizio:t,data_fine:o,nome_organizzazione:s})});if(l.ok){let f=await l.json();console.log(f),i.value="Piano di pulizia creato con successo"}else l.status==404?n.value="Zona non trovata":n.value="Errore sconosciuto"}return(s,t)=>(c(),d("form",null,[P,V,e("div",w,[S,v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.value=o),placeholder:"ID"},null,512),[[y,a.value]]),e("button",{type:"button",onClick:t[1]||(t[1]=o=>g(this.org_name,this.date[0],this.date[1]))},"Crea piano di pulizia")]),e("div",T,[x,_(b(p),{modelValue:s.date,"onUpdate:modelValue":t[2]||(t[2]=o=>z(date)?date.value=o:null),range:""},null,8,["modelValue"])]),D,e("span",O,u(n.value),1),e("span",j,u(i.value),1)]))}}),M={setup(m){return(a,n)=>(c(),d("main",null,[_(U,{org_name:a.$route.params.org_name},null,8,["org_name"])]))}};export{M as default};
